# QA生成仕様書：ニュース記事

## 1. 概要

このフローは、txt形式のドキュメント(ニュース記事)から事実を抽出し、4択のQA問題を自動生成します。

---

## 2. ドキュメント形式

### 形式
- **txtファイル**

### メタデータ

ドキュメントの構造：
- **【タイトル】**：記事のタイトル
- **【メディア名】**：メディア組織名
- **【公開日時】**：記事が公開された年月日
- **【更新日時】**：記事が更新された年月日
- **【本文】**：記事の本文コンテンツ

---

## 3. ステップの詳細

### Step1：ドキュメント読み込み
- **目的**：ドキュメントファイルを読み込む
- **入力**：指定されたファイルパス
- **処理**：ドキュメントの内容を分析

### Step2：問題作成
- **目的**：ドキュメント内容から4択QA問題を作成
- **入力**：分析されたドキュメント
- **処理**：要件に従い4択多肢選択問題を生成

### Step3：問題内容の確認
- **目的**：生成されたQA問題が、問題と回答形式の要件を満たしているか検証
- **入力**：生成されたQA問題
- **処理**：要件充足度をチェック、必要に応じて修正

### Step4：ファイル出力
- **目的**：作成されたQA問題をファイルとして保存
- **出力**：`{ドキュメント名}_qa.jsonl`

---

## 4. 問題と回答形式の要件

### 必須要件(問題作成時に必ず守る)

1. **時間制約の組み込み**
   - 問題文に必ず時系列情報を組み込む
   - 形式例：「2024年09月27日時点で、...」「2024年09月27日に起きたxxx...」
   - 日付は記事の【公開日時】から抽出

2. **記事のトピック名を組み込む**
   - 問題文に必ずトピック名を組み込む
   - 例：「...{大会の名称}において、...」「...{国際会議名}では、」
   - トピックは記事の【タイトル】、【本文】から抽出

3. **参照表現の禁止**
   - 「記事によると」「本文から見ると」などの表現を使わない
   - 直接的な事実表現のみを使用

4. **客観的事実のみ**
   - ドキュメントに明示されている情報のみを使用
   - 推測や解釈を含まない
   - 「理由や説明を問う」ような主観的な質問を避ける

5. **単語/短文形式**
   - 回答は文章ではなく、単語または短い句で答えられるように
   - 選択肢の長さは最大20文字以内

6. **メタ質問の禁止**
   - ドキュメント自体に関する質問を避ける
   - NG例：「このニュース記事の公開日時は？」

7. **尤もらしい不正答の提供**
   - 正解と似た値や関連のある値を選択肢に含める
   - 単なる間違いではなく、判断を要する選択肢を用意

---

## 5. 出力形式

### ファイル形式
- **形式**: JSONL(JSON Lines)
- **エンコーディング**: UTF-8
- **ファイル名パターン**: `{ドキュメント名}_qa.jsonl`

### 出力例
```json
{
  "question_number": 1,
  "question_text": "2024年9月27日の自民党総裁選で、自民党の第28代総裁に選出されたのは誰か？",
  "options": {
    "A": "石破茂",
    "B": "高市早苗",
    "C": "茂木敏充",
    "D": "甘利明" 
  },
  "correct_answer": "A",
  "explanation": "記事に明示されている通り、石破茂元幹事長が決選投票で高市氏を逆転し、第28代総裁に選出されました。"
}
```

### 各項目の説明
- **question_number**：問題番号(1から始まる連番)
- **question_text**：質問文
- **options**：A, B, C, Dの4つの選択肢
- **correct_answer**：正解(A、B、C、Dのいずれか)
- **explanation**：正解の理由

---
